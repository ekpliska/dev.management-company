Electronic Smart Assistant (ELSA)
=====================

Проект "Программный комплекс для собственников жилья и управляющей организации".

## Установка

1. Установка с помощью [Composer](http://getcomposer.org/). **Выполните:**

    ```
    composer global require "fxp/composer-asset-plugin:~1.0.0"
    ```

2. Клонируйте репозиторий проекта:

    ```
    git clone http://gitlab.tecman.ru/roman/nevasoft.git
    ```

3. Выполните команду:

    ```
    cd nevasoft
    ```

4. Выполните:

    ```
    composer update
    ```


## Подключение к Базе Данных

1. Создайте **базу данных** и задайте параметры для подключения к созданной базе данных. Подключение к базе данных производится в файле:

    ```
    /config/db.php
    ```

2. Примените миграции, выполнив команду:

    ```
    yii migrate
    ```

    или

    ```
    php yii migrate
    ```

После установки приложения, в нем уже зарегистрирован пользователь с правами администратора.

    * Логин - 
    * Пароль - 


### Настройка подключения СМС-сервиса

В приложении используется СМС-сервис [smsc.ru](https://smsc.ru) Для настроек СМС-сервиса используйте файл:

    /environment/.env

раздел: **# SMS SERVICE**

Оправителя, необходимо настроить в личном кибинете СМС-сервиса [smsc.ru](https://smsc.ru/senders/)

### Настройка интреграции платежной системы

В личном кабинете [платежной системы] (https://merchant.cloudpayments.ru/login), необходимо получить параметры: **Public ID**, **Пароль для API** для Боевого сайта, 
где будет размещено приложение.

Данные параметры задать у одноименных параметров в файле:

    /environment/.env

раздел: **# PAYMNET SYSTEM**


### Настройка почтовой службы

Для настройки почтовой службы используйте файл:
    
    /config/mailer_config.php
    
    /config/params.php Раздел email_subscriber

Для указания служебных электронных адресов, используйте конфигурационный файл:

    /config/params.php
    
**Настраивая параметры, следуйте комментариям, которыми снабжены файлы настроек.**
После настройки почтовой службы необходимо настроить задание в планировщике задач ```Cron```. Выполните:

    crontab -e

В открывшемся файле, в конце, укажите следующее:

    * */2 * * * [Путь к php /usr/bin/php] [Путь к директории ващего проекта]/yii mailer/send

    Пример:

    * */2 * * * /usr/bin/php  /home/user/nevasoft/yii mailer/send

Проверка новых рассылок будет производится на сервере каждые два часа каждый день.


### Загрузка квитанций

Загрузка квитанций реализуется на стороне **сервера**, на котором расположена API Заказчика. Настройка адреса для API, а так же настройка пути хранения 
квитанций вынесена в личном кабинете Администратора, раздел Настройки/Настройки портала.

Загрузка квитанций реализуется на стороне **сервера**, по следующей договоренности.

    /receipts/{id дома}/{расчётный период в формате ГГГГ-ММ}/{Номер лицевого счёта}.pdf


